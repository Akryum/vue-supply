!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.VueSupply=factory():root.VueSupply=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=2)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={isSupply:!0,data:function(){return{consumers:0,loading:0}},computed:{active:function(){return this.consumers>0},ready:function(){return 0===this.loading}},watch:{consumers:function(val,oldVal){val!==oldVal&&this._handleConsumersChange(val,oldVal)},ready:function(val,oldVal){val!==oldVal&&this._handleReadyChange(val)},activate:function(val,oldVal){val!==oldVal&&this._handleActiveChange(val)}},methods:{_activate:function(){this.activate(),this.$emit("is-active")},_deactivate:function(){this.deactivate(),this.$emit("is-not-active")},_handleReadyChange:function(val){this.handleReadyChange(val),this.$emit("ready",val),val?this.$emit("is-ready"):this.$emit("is-not-ready")},_handleActiveChange:function(val){this.handleActiveChange(val),this.$emit("active",val)},_handleConsumersChange:function(val,oldVal){this.handleConsumersChange(val,oldVal),this.$emit("consumers",val,oldVal)},grasp:function(){1===++this.consumers&&this._activate()},release:function(){0===--this.consumers&&this._deactivate()},ensureActive:function(){var _this=this;return new Promise(function(resolve){_this.active?resolve():_this.$once("is-active",resolve)})},ensureReady:function(){var _this2=this;return new Promise(function(resolve){_this2.ready?resolve():_this2.$once("is-ready",resolve)})},activate:function(){},deactivate:function(){},handleReadyChange:function(val){},handleActiveChange:function(val){},handleConsumersChange:function(val,oldval){}}}},function(module,exports){var g,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};g=function(){return this}();try{g=g||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(g=window)}module.exports=g},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),function(global){function consume(resource){return resource.grasp(),resource.ensureReady().then(function(){return resource.release})}function use(arg){var manageKeepAlive=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],name=void 0,options={created:function(){var resource=void 0,def=arg;if("string"==typeof def){var _name=def;if(!(def=defs[_name]))throw Error("Supply '"+_name+"' not found. Did you register it?")}if(def._isVue)name=arg._uid,resource=arg;else{resource=getResource(def,this.$root._supplyCache=this.$root._supplyCache||{}),name=def.name}this.$supply=this.$supply||{},this.$supply[name]=resource,resource.grasp()},beforeDestroy:function(){var resource=arg._isVue?arg:this.$supply[name];resource&&resource.release()}};return manageKeepAlive&&Object.assign(options,{activated:function(){var resource=arg._isVue?arg:this.$supply[name];resource&&resource.grasp()},deactivated:function(){var resource=arg._isVue?arg:this.$supply[name];resource&&resource.release()}}),options}function getResource(def,cache){var name=def.name||"_"+uid++,resource=cache[name];return resource||(resource=cache[name]=new Vue(def)),resource}function register(name,def){def.name=name,defs[name]=def}function injectSupply(storeOptions,cache){var result=storeOptions;if("object"===_typeof(storeOptions.supply)){var supplies=storeOptions.supply.use.reduce(function(dic,name){return dic[name]=getResource(defs[name],cache),dic},{}),newOptions=storeOptions.supply.inject(supplies);result={};for(var key in storeOptions)result[key]=Object.assign({},storeOptions[key],newOptions[key]);delete result.supply}if("object"===_typeof(storeOptions.modules))for(var _key in storeOptions.modules){var module=storeOptions.modules[_key];result.modules[_key]=injectSupply(module,cache)}return result}function install(pVue){Vue=pVue,Vue.mixin({beforeCreate:function(){this.$options.supplyCache&&(this._supplyCache=this.$options.supplyCache)}})}__webpack_exports__.consume=consume,__webpack_exports__.use=use,__webpack_exports__.getResource=getResource,__webpack_exports__.register=register,__webpack_exports__.injectSupply=injectSupply,__webpack_exports__.install=install;var __WEBPACK_IMPORTED_MODULE_0__resource_supply__=__webpack_require__(0);__webpack_require__.d(__webpack_exports__,"Supply",function(){return __WEBPACK_IMPORTED_MODULE_0__resource_supply__.a});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Vue=void 0,uid=0,defs={},plugin={version:"0.3.0",install:install};__webpack_exports__.default=plugin;var GlobalVue=null;"undefined"!=typeof window?GlobalVue=window.Vue:void 0!==global&&(GlobalVue=global.Vue),GlobalVue&&GlobalVue.use(plugin)}.call(__webpack_exports__,__webpack_require__(1))}])});